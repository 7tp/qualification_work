!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}({2:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));const s="https://newsapi.org/v2/everything?",n="4af89f6877ab4761885f949aa2b1dd7d",o="https://api.github.com/repos/7tp/monty.ml/commits"},22:function(e,t,r){"use strict";r.r(t);r(7);var s=r(2);const n=new Date,o=`&to=${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()}`,l=new Date(n.setDate(n.getDate()-7)),i=`&from=${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`+o;function u(e){const t=document.querySelector(".result");e?t.classList.remove("result__hide"):t.classList.add("result__hide")}function c(e){const t=document.querySelector(".result__loading");e?t.classList.remove("result__hide"):t.classList.add("result__hide")}function a(e){const t=document.querySelector(".result__not-found");e?t.classList.remove("result__hide"):t.classList.add("result__hide")}function d(e){const t=document.querySelector(".result__is-found");e?t.classList.remove("result__hide"):t.classList.add("result__hide")}function h(e){e>0?document.querySelector(".result__button-more").classList.remove("result__hide"):document.querySelector(".result__button-more").classList.add("result__hide")}class _{constructor(e,t,r,s,n,o){this.link=e,this.image=t,this.date=r,this.title=s,this.text=n,this.source=o,this.cardElement=this.create(this.link,this.image,this.date,this.title,this.text,this.source)}create(e,t,r,s,n,o){let l=document.querySelector("#tmplResult").content.querySelector(".result__card-link").cloneNode(!0);return l.setAttribute("href",`${e}`),l.querySelector(".result__card-image").setAttribute("style",`background-image: url(${t})`),l.querySelector(".result__card-date").textContent=r,l.querySelector(".result__card-title").textContent=s,l.querySelector(".result__card-text").textContent=n,l.querySelector(".result__card-source").textContent=o,l}}class m{constructor(e,t){this.container=e,this.showNews(t)}addNews(e,t,r,s,n,o){const{cardElement:l}=new _(e,t,r,s,n,o);this.container.appendChild(l)}showNews(e){for(let t=0;t<e.length;t++){let r=new Date(e[t].publishedAt);r=`${r.toLocaleString("ru",{month:"long",day:"numeric"})}, ${r.getFullYear()}`,this.addNews(e[t].url,e[t].urlToImage,r,e[t].title,e[t].description,e[t].source.name)}}}const g=document.querySelector(".result__grid");function f(e){return window.innerWidth>534&&window.innerWidth<1280?e.splice(0,4):e.splice(0,3)}function S(e,t,r){e.onclick=function(){t=f(r),h(r.length),new m(g,t)}}const y=document.querySelector(".result__grid"),b=document.querySelector(".result__button-more");const p=document.querySelector(".search__error");class q{constructor(e,t){this.button=e,this.question=t,this.listener(t),this.validate()}listener(){this.question.addEventListener("input",()=>{this.validate()})}validate(){0===this.question.value.length?(this.button.setAttribute("disabled",!0),this.button.classList.add("button_disabled"),p.textContent="Это обязательное поле"):this.question.validity.valid&&(this.button.removeAttribute("disabled"),this.button.classList.remove("button_disabled"),p.textContent="")}}class v{constructor(e,t,r,s){this.url=e,this.question=t,this.date=r,this.key=s}loadData(){return fetch(`${this.url}q=${this.question}${this.date}&pageSize=100&apiKey=${this.key}`).then(e=>e.ok?e.json():Promise.reject(`Ошибка при загрузке из сервера ${this.url}: ${e.status}`)).catch(e=>console.log(e))}}document.querySelectorAll(".header__link_white")[1].style.cssText="border-bottom: none";const w=document.forms.news,x=w.elements.news_question,C=document.querySelector(".search__form-button"),L=document.querySelector(".result__grid"),$=document.querySelector(".result__button-more");if(x.value=sessionStorage.getItem("question"),sessionStorage.question){u(!0);const e=JSON.parse(localStorage.getItem("newsCards"));let t=f(e);new m(L,t),h(e.length,t.length),u(!0),d(!0),S($,t,e)}w.addEventListener("submit",(function(e){e.preventDefault(),sessionStorage.clear(),localStorage.clear();let t=x.value;t=x.value.replace(/\s+/gi," AND "),sessionStorage.setItem("question",t.replace(/\sAND\s/gi," ").replace(/^\w|[а-я]/i,e=>e.toUpperCase())),localStorage.setItem("question",sessionStorage.getItem("question"));const r=new v(s.c,t,i,s.a);L.textContent="",a(!1),d(!1),c(!0),u(!0),n=r,n.loadData().then(e=>{let t=[];c(!1),0===e.totalResults?(a(!0),d(!1),sessionStorage.clear(),localStorage.clear()):(a(!1),d(!0)),sessionStorage.setItem("newsCards",JSON.stringify(e.articles)),localStorage.setItem("newsInAWeek",e.articles.length),localStorage.setItem("newsCards",sessionStorage.getItem("newsCards")),t=f(e.articles),new m(y,t),h(e.articles.length),S(b,t,e.articles)}).catch(e=>{console.log(e),sessionStorage.clear(),localStorage.clear(),a(!0),d(!1),document.querySelector(".result__not-found-title").textContent="";let t=document.querySelector(".result__not-found-text");t.setAttribute("style","margin-top: 0"),t.textContent="Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз."});var n})),document.querySelector(".result__not-found-title").textContent="Ничего не найдено";let A=document.querySelector(".result__not-found-text");A.removeAttribute("style","margin-top: 0"),A.textContent="К сожалению по вашему запросу ничего не найдено.",x.addEventListener("focus",()=>{new q(C,x)}),x.addEventListener("blur",()=>{document.querySelector(".search__error").textContent="",C.removeAttribute("disabled"),C.classList.remove("button_disabled")})},7:function(e,t,r){}});